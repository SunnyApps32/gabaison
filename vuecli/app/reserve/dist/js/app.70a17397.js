(function(){"use strict";var e={9075:function(e,t,s){var a=s(5130),i=s(6768);function n(e,t,s,a,n,r){const o=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.Wv)(o)}var r={name:"App"},o=s(1241);const l=(0,o.A)(r,[["render",n]]);var c=l,d=s(1387),u=s(114),h=s(4232);const v=e=>((0,i.Qi)("data-v-969ab324"),e=e(),(0,i.jt)(),e),p=v((()=>(0,i.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1))),m={class:"div"},k=v((()=>(0,i.Lk)("div",{class:"div-2"},"管理者 Home",-1))),g=v((()=>(0,i.Lk)("div",{class:"div-3"},[(0,i.eW)(" 現在のご利用者数"),(0,i.Lk)("br"),(0,i.Lk)("br")],-1))),L={class:"div-4"},f=v((()=>(0,i.Lk)("div",{class:"div-11"},[(0,i.eW)(" supported by "),(0,i.Lk)("a",{href:"https://sunapp.jp",class:"sunapp"},"sunapp"),(0,i.eW)(" LLC.")],-1)));function b(e,t,s,a,n,r){return(0,i.uX)(),(0,i.CE)(i.FK,null,[p,(0,i.Lk)("div",m,[k,g,(0,i.Lk)("div",L,(0,h.v_)(n.now_checkined)+"名",1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.goToListpage&&r.goToListpage(...e)),class:"div-6"},"予約者一覧"),(0,i.Lk)("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/a735cab541df0a2ebb0694177468ec5832da1c6e573c68524985aa4fcd7d7fdf?",class:"img",onClick:t[1]||(t[1]=(...e)=>r.goToQrpage&&r.goToQrpage(...e))}),f])],64)}s(4114);var C={props:{reserveId:String},data(){return{url:"",childrenCount:0,reservation:null,now_checkined:0}},async created(){try{const e=await fetch("https://sunapp.jp/sunappForReserve/api/getCurrentCheckInCount.php",{method:"POST",headers:{"Content-Type":"application/json",Pragma:"no-cache"}}),t=await e.json();console.log(t.data),"success"===t.status?(this.now_checkined=t.data,console.log(this.now_checkined)):console.error("エラーが発生しました: ",t.message)}catch(e){console.error("エラーが発生しました: ",e)}},computed:{},methods:{goToQrpage(){this.$router.push({name:"qrcodeReader"})},goToListpage(){this.$router.push({name:"list"})}}};const y=(0,o.A)(C,[["render",b],["__scopeId","data-v-969ab324"]]);var I=y;const w=e=>((0,i.Qi)("data-v-7e0c4925"),e=e(),(0,i.jt)(),e),T=w((()=>(0,i.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1))),j={class:"div"},_=w((()=>(0,i.Lk)("div",{class:"div-2"},[(0,i.eW)("ウォーターパークからつ"),(0,i.Lk)("br"),(0,i.eW)(" 予約削除ページ")],-1))),O=w((()=>(0,i.Lk)("div",{class:"div-7"},[(0,i.Lk)("div",{class:"div-8"},"内容"),(0,i.Lk)("div",{class:"div-9"})],-1))),P={class:"div-10"},R={key:0},S=w((()=>(0,i.Lk)("br",null,null,-1))),E=w((()=>(0,i.Lk)("br",null,null,-1))),F=w((()=>(0,i.Lk)("br",null,null,-1))),$=w((()=>(0,i.Lk)("br",null,null,-1))),D=w((()=>(0,i.Lk)("br",null,null,-1))),W=w((()=>(0,i.Lk)("br",null,null,-1))),Q=w((()=>(0,i.Lk)("br",null,null,-1))),V=w((()=>(0,i.Lk)("div",{class:"div-5"},"予約を削除",-1))),M=[V],x=w((()=>(0,i.Lk)("div",{class:"div-11"},"supported by sunapp LLC.",-1)));function X(e,t,s,a,n,r){return(0,i.uX)(),(0,i.CE)(i.FK,null,[T,(0,i.Lk)("div",j,[_,O,(0,i.Lk)("div",P,[n.reservation?((0,i.uX)(),(0,i.CE)("p",R,[(0,i.eW)(" 予約日 ："+(0,h.v_)(this.reservation["date"]??0)+" "+(0,h.v_)(this.reservation["time"]??0),1),S,(0,i.eW)(" 同伴人数： "+(0,h.v_)(this.reservation["customer_num"]??0)+"人",1),E,(0,i.eW)(" 名前 ： "+(0,h.v_)(this.reservation["name"]??1),1),F,(0,i.eW)(" 電話番号： "+(0,h.v_)(this.reservation["tel"]??0),1),$,(0,i.eW)(" Email ： "+(0,h.v_)(this.reservation["email"]??0),1),D,(0,i.eW)(" 居住地 ： "+(0,h.v_)(this.reservation["hometown"]??0),1),W,(0,i.eW)(" 利用料金： "+(0,h.v_)(this.reservation["fee"]??1)+"円",1),Q])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{class:"div-4",onClick:t[0]||(t[0]=(...e)=>r.deleteReserve&&r.deleteReserve(...e))},M),x])],64)}var A={props:{reserveId:String},data(){return{reservation:null}},async created(){try{const e=await fetch("https://sunapp.jp/sunappForReserve/api/getReservationById.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveid:this.reserveId})}),t=await e.json();this.reservation=t.reservation,"success"===t.status?(this.reservation=t.reservation,console.log(this.reservation)):(console.error("エラーが発生しました: ",t.message),alert(t.message))}catch(e){console.error("エラーが発生しました: ",e),alert("予約情報の取得に失敗しました。")}},methods:{async deleteReserve(){const e={name:this.reservation["name"],furigana:this.reservation["furigana"],tel:this.reservation["tel"],email:this.reservation["email"],hometown:this.reservation["hometown"],event_id:this.reservation["event_id"],customer_num:this.reservation["customer_num"],fee:this.reservation["fee"],date:this.reservation["date"],time:this.reservation["time"],reserveid:this.reserveId};try{const t=await fetch("https://sunapp.jp/sunappForReserve/api/deleteReserve.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();"success"===s.status?(this.message="予約が削除されました",alert("予約が削除されました"),this.$router.push({name:"Home"})):(this.message=`エラーが発生しました: ${s.message}`,console.log(s.message))}catch(t){this.message=`エラーが発生しました: ${t.message}`}}}};const q=(0,o.A)(A,[["render",X],["__scopeId","data-v-7e0c4925"]]);var H=q;const J=e=>((0,i.Qi)("data-v-4ef8e206"),e=e(),(0,i.jt)(),e),U={class:"div"},N=J((()=>(0,i.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1))),K={class:"div-2"},B=J((()=>(0,i.Lk)("div",{class:"div-3"},"QRコードリーダー",-1))),z={class:"scanner"},G=J((()=>(0,i.Lk)("div",{class:"instructions"},[(0,i.eW)("QRコードを"),(0,i.Lk)("br"),(0,i.eW)("カメラにかざしてください")],-1))),Y=J((()=>(0,i.Lk)("div",{id:"qr-reader",class:"qr-reader"},null,-1))),Z=J((()=>(0,i.Lk)("div",{id:"qr-reader-results",class:"results"},null,-1))),ee=J((()=>(0,i.Lk)("div",{id:"qr-reader-error",class:"error"},null,-1))),te={class:"manual-input"},se=J((()=>(0,i.Lk)("div",{class:"div-11"},[(0,i.eW)("supported by "),(0,i.Lk)("a",{href:"https://sunapp.jp",class:"sunapp"},"sunapp"),(0,i.eW)(" LLC.")],-1)));function ae(e,t,s,n,r,o){return(0,i.uX)(),(0,i.CE)("div",U,[N,(0,i.Lk)("div",K,[(0,i.Lk)("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/93df00fc34138266fdb4a1b858262d23dc5dc1d3f04b1fffdd1ac7810d8282ec?",class:"img",onClick:t[0]||(t[0]=(...e)=>o.goToHomePage&&o.goToHomePage(...e))}),B]),(0,i.Lk)("div",z,[G,Y,Z,ee,(0,i.Lk)("div",te,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=t=>e.manualReserveId=t),placeholder:"予約IDでチェックイン",class:"input-field"},null,512),[[a.Jo,e.manualReserveId]]),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.submitManualReserveId&&o.submitManualReserveId(...e)),class:"submit-button"},"次へ")])]),se])}var ie=s(9143),ne={name:"QrCodeScanner",data(){return{html5QrCode:null}},mounted(){this.startScanner()},methods:{startScanner(){this.html5QrCode=new ie.j9("qr-reader");const e=e=>{this.html5QrCode.stop().then((()=>{this.$router.push({name:"checkInOutPage",params:{reserveId:e}})})).catch((e=>{console.error("Failed to stop scanning.",e)}))},t=e=>{console.log(`Error: ${e}`)},s={fps:10,qrbox:250};navigator.mediaDevices.enumerateDevices().then((a=>{const i=a.filter((e=>"videoinput"===e.kind));i.length>0?this.html5QrCode.start({facingMode:"environment"},s,e).catch(t):alert("カメラデバイスが見つかりませんでした。")})).catch((e=>{console.log(`Error: ${e.message}`)}))},submitManualReserveId(){""!==this.manualReserveId.trim()?this.$router.push({name:"checkInOutPage",params:{reserveId:this.manualReserveId}}):alert("予約IDを入力してください。")},goToHomePage(){this.$router.push({name:"Home"})}}};const re=(0,o.A)(ne,[["render",ae],["__scopeId","data-v-4ef8e206"]]);var oe=re;const le=e=>((0,i.Qi)("data-v-294096ce"),e=e(),(0,i.jt)(),e),ce=le((()=>(0,i.Lk)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1))),de={class:"div"},ue={class:"div-2"},he=le((()=>(0,i.Lk)("div",{class:"div-44"},"チェックイン/アウト",-1))),ve={class:"div-3"},pe={key:0,class:"div-5"},me={key:1,class:"div-6"},ke={key:2,class:"div-66"},ge=le((()=>(0,i.Lk)("div",{class:"div-7"},[(0,i.Lk)("div",{class:"div-8"},"予約内容")],-1))),Le={class:"div-10"},fe={key:0},be=le((()=>(0,i.Lk)("br",null,null,-1))),Ce=le((()=>(0,i.Lk)("br",null,null,-1))),ye=le((()=>(0,i.Lk)("br",null,null,-1))),Ie=le((()=>(0,i.Lk)("br",null,null,-1))),we=le((()=>(0,i.Lk)("br",null,null,-1))),Te=le((()=>(0,i.Lk)("br",null,null,-1))),je=le((()=>(0,i.Lk)("br",null,null,-1))),_e=["disabled"],Oe={key:0,class:"modal"},Pe={class:"modal-content"},Re=le((()=>(0,i.Lk)("h2",null,"予約削除確認",-1))),Se=le((()=>(0,i.Lk)("p",null,"本当に削除しますか？",-1))),Ee=le((()=>(0,i.Lk)("p",null,"削除するには「Delete」と入力してください。",-1))),Fe=["disabled"],$e=le((()=>(0,i.Lk)("div",{class:"div-11"},[(0,i.eW)(" supported by "),(0,i.Lk)("a",{href:"https://sunapp.jp",class:"sunapp"},"sunapp"),(0,i.eW)(" LLC.")],-1))),De={class:"loader",key:"loader"},We=le((()=>(0,i.Lk)("div",{id:"loading"},[(0,i.Lk)("div",{class:"loading"},[(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"})])],-1))),Qe=[We];function Ve(e,t,s,n,r,o){return(0,i.uX)(),(0,i.CE)(i.FK,null,[ce,(0,i.Lk)("div",de,[(0,i.Lk)("div",ue,[(0,i.Lk)("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/93df00fc34138266fdb4a1b858262d23dc5dc1d3f04b1fffdd1ac7810d8282ec?",class:"img",onClick:t[0]||(t[0]=e=>this.$router.go(-1))}),he,(0,i.Lk)("button",{class:"button-1",onClick:t[1]||(t[1]=(...e)=>o.confirmDelete&&o.confirmDelete(...e))},"予約削除")]),(0,i.Lk)("div",ve,[0===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",pe,"未チェックイン")):1===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",me,"チェックイン済")):2===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",ke,"チェックアウト済")):(0,i.Q3)("",!0)]),ge,(0,i.Lk)("div",Le,[r.reservation?((0,i.uX)(),(0,i.CE)("p",fe,[(0,i.eW)(" 予約日 ："+(0,h.v_)(this.reservation["date"]??0)+" "+(0,h.v_)(this.reservation["time"]??0),1),be,(0,i.eW)(" 同伴人数： "+(0,h.v_)(this.reservation["customer_num"]??0)+"人",1),Ce,(0,i.eW)(" 名前 ： "+(0,h.v_)(this.reservation["name"]??1),1),ye,(0,i.eW)(" 電話番号： "+(0,h.v_)(this.reservation["tel"]??0),1),Ie,(0,i.eW)(" Email ： "+(0,h.v_)(this.reservation["email"]??0),1),we,(0,i.eW)(" 居住地 ： "+(0,h.v_)(this.reservation["hometown"]??0),1),Te,(0,i.eW)(" 利用料金： "+(0,h.v_)(this.reservation["fee"]??1)+"円",1),je])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{class:"div-4",onClick:t[5]||(t[5]=(...t)=>e.saveQrCode&&e.saveQrCode(...t)),disabled:r.isLoading},[0===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"div-5",onClick:t[2]||(t[2]=(...e)=>o.checkIn&&o.checkIn(...e))},"チェックイン")):1===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"div-5",onClick:t[3]||(t[3]=(...e)=>o.checkOut&&o.checkOut(...e))},"チェックアウト")):2===r.checkInFlag?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"div-55",onClick:t[4]||(t[4]=(...e)=>o.reset&&o.reset(...e))},"未チェックインへ戻す")):(0,i.Q3)("",!0)],8,_e),r.showDeleteModal?((0,i.uX)(),(0,i.CE)("div",Oe,[(0,i.Lk)("div",Pe,[(0,i.Lk)("span",{class:"close",onClick:t[6]||(t[6]=(...e)=>o.closeDeleteModal&&o.closeDeleteModal(...e))},"×"),Re,Se,Ee,(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.deleteConfirmationText=e),placeholder:"Deleteを入力"},null,512),[[a.Jo,r.deleteConfirmationText]]),(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>o.deleteReserve&&o.deleteReserve(...e)),disabled:"Delete"!==r.deleteConfirmationText},"削除",8,Fe)])])):(0,i.Q3)("",!0),$e]),(0,i.bF)(a.F,{name:"fade",mode:"out-in"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.Lk)("div",De,Qe,512),[[a.aG,r.isLoading]])])),_:1})],64)}var Me={props:{reserveId:String},data(){return{url:"",childrenCount:0,reservation:null,checkInFlag:0,isLoading:!1,showDeleteModal:!1,deleteConfirmationText:""}},async created(){try{this.isLoading=!0;const e=await fetch("https://sunapp.jp/sunappForReserve/api/getReservationById.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveid:this.reserveId})}),t=await e.json();this.reservation=t.reservation,"success"===t.status?(this.reservation=t.reservation,this.checkInFlag=this.reservation["checkIn"]):(console.error("エラーが発生しました: ",t.message),alert(t.message))}catch(e){console.error("エラーが発生しました: ",e),alert("予約情報の取得に失敗しました。")}this.isLoading=!1},computed:{allowance(){return 300*this.childrenCount}},methods:{goToQrpage(){this.$router.push({name:"qrcodeReader"})},async checkIn(){this.isLoading=!0;try{const e=await fetch("https://sunapp.jp/sunappForReserve/api/checkInOut.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:this.reserveId,command:"checkIn"})}),t=await e.json();"success"===t.status?(this.isLoading=!1,this.$router.go(-1)):(this.isLoading=!1,console.error("エラーが発生しました: ",t.message),alert(t.message))}catch(e){this.isLoading=!1,console.error("エラーが発生しました: ",e),alert("予約情報の取得に失敗しました。")}this.isLoading=!1},async checkOut(){this.isLoading=!0;try{const e=await fetch("https://sunapp.jp/sunappForReserve/api/checkInOut.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:this.reserveId,command:"checkOut"})}),t=await e.json();"success"===t.status?(this.isLoading=!1,this.$router.go(-1)):(this.isLoading=!1,console.error("エラーが発生しました: ",t.message),alert(t.message))}catch(e){this.isLoading=!1,console.error("エラーが発生しました: ",e),alert("予約情報の取得に失敗しました。")}this.isLoading=!1},async reset(){this.isLoading=!0;try{const e=await fetch("https://sunapp.jp/sunappForReserve/api/checkInOut.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:this.reserveId,command:"reset"})}),t=await e.json();"success"===t.status?(this.isLoading=!1,this.$router.go(-1)):(this.isLoading=!1,console.error("エラーが発生しました: ",t.message),alert(t.message))}catch(e){this.isLoading=!1,console.error("エラーが発生しました: ",e),alert("予約情報の取得に失敗しました。")}this.isLoading=!1},confirmDelete(){confirm("本当に削除しますか？")&&(this.showDeleteModal=!0)},closeDeleteModal(){this.showDeleteModal=!1,this.deleteConfirmationText=""},async deleteReserve(){if("Delete"!==this.deleteConfirmationText)return void alert("削除するには「Delete」と入力してください。");const e={name:this.reservation["name"],furigana:this.reservation["furigana"],tel:this.reservation["tel"],email:this.reservation["email"],hometown:this.reservation["hometown"],event_id:this.reservation["event_id"],customer_num:this.reservation["customer_num"],fee:this.reservation["fee"],date:this.reservation["date"],time:this.reservation["time"],reserveid:this.reserveId};this.isLoading=!0;try{const t=await fetch("https://sunapp.jp/sunappForReserve/api/deleteFromConsole.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();"success"===s.status?(this.message="予約が削除されました",this.isLoading=!1,this.$router.push({name:"Home"})):(this.message=`エラーが発生しました: ${s.message}`,this.isLoading=!1,console.log(s.message))}catch(t){this.isLoading=!1,this.message=`エラーが発生しました: ${t.message}`}this.isLoading=!1}}};const xe=(0,o.A)(Me,[["render",Ve],["__scopeId","data-v-294096ce"]]);var Xe=xe;const Ae=e=>((0,i.Qi)("data-v-2b942739"),e=e(),(0,i.jt)(),e),qe={class:"container"},He={class:"div-2"},Je=Ae((()=>(0,i.Lk)("div",{class:"div-3"},"予約一覧 ",-1))),Ue={class:"main"},Ne={class:"tabs"},Ke=["onClick"],Be={class:"filters"},ze=Ae((()=>(0,i.Lk)("option",{value:""},"ステータスで検索",-1))),Ge=Ae((()=>(0,i.Lk)("option",{value:"0"},"未チェックイン",-1))),Ye=Ae((()=>(0,i.Lk)("option",{value:"1"},"チェックイン中",-1))),Ze=Ae((()=>(0,i.Lk)("option",{value:"2"},"チェックアウト済",-1))),et=[ze,Ge,Ye,Ze],tt=Ae((()=>(0,i.Lk)("option",{value:""},"時間で検索",-1))),st=Ae((()=>(0,i.Lk)("option",{value:"9:30~11:20"},"9:30~11:20",-1))),at=Ae((()=>(0,i.Lk)("option",{value:"12:00~13:50"},"12:00~13:50",-1))),it=Ae((()=>(0,i.Lk)("option",{value:"15:00~16:50"},"15:00~16:50",-1))),nt=[tt,st,at,it],rt=Ae((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"名前"),(0,i.Lk)("th",null,"フリガナ"),(0,i.Lk)("th",null,"電話番号"),(0,i.Lk)("th",null,"人数"),(0,i.Lk)("th",null,"ステータス")])],-1))),ot=["onClick"],lt={class:"loader",key:"loader"},ct=Ae((()=>(0,i.Lk)("div",{id:"loading"},[(0,i.Lk)("div",{class:"loading"},[(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"}),(0,i.Lk)("div",{class:"obj"})])],-1))),dt=[ct];function ut(e,t,s,n,r,o){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",qe,[(0,i.Lk)("div",He,[(0,i.Lk)("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/93df00fc34138266fdb4a1b858262d23dc5dc1d3f04b1fffdd1ac7810d8282ec?",class:"img",onClick:t[0]||(t[0]=(...e)=>o.goToHomePage&&o.goToHomePage(...e))}),Je,(0,i.Lk)("button",{class:"button-2",onClick:t[1]||(t[1]=(...e)=>o.update&&o.update(...e))},"更新"),(0,i.Lk)("button",{class:"button-2",onClick:t[2]||(t[2]=(...e)=>o.exportToCSV&&o.exportToCSV(...e))},"出力")]),(0,i.Lk)("main",Ue,[(0,i.Lk)("div",Ne,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.dates,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>r.selectedDate=e,class:(0,h.C4)({active:r.selectedDate===e})},(0,h.v_)(e),11,Ke)))),128))]),(0,i.Lk)("div",Be,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.searchName=e),placeholder:"名前で検索"},null,512),[[a.Jo,r.searchName]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.searchFurigana=e),placeholder:"フリガナで検索"},null,512),[[a.Jo,r.searchFurigana]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.searchTel=e),placeholder:"電話番号で検索"},null,512),[[a.Jo,r.searchTel]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.searchStatus=e)},et,512),[[a.u1,r.searchStatus]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.searchTime=e)},nt,512),[[a.u1,r.searchTime]])]),(0,i.Lk)("table",null,[rt,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.filteredReservations,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id,onClick:t=>o.goToCheckInOutPage(e.id),class:"clickable-row"},[(0,i.Lk)("td",null,(0,h.v_)(e.name),1),(0,i.Lk)("td",null,(0,h.v_)(e.furigana),1),(0,i.Lk)("td",null,(0,h.v_)(e.tel),1),(0,i.Lk)("td",null,(0,h.v_)(e.customer_num),1),(0,i.Lk)("td",{class:(0,h.C4)(o.reservationStatusClass(e.checkIn))},(0,h.v_)(o.reservationStatus(e.checkIn)),3)],8,ot)))),128))])])])]),(0,i.bF)(a.F,{name:"fade",mode:"out-in"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.Lk)("div",lt,dt,512),[[a.aG,r.isLoading]])])),_:1})],64)}s(4603),s(7566),s(8721);var ht={data(){return{dates:["8/1(木)","8/2(金)","8/3(土)","8/4(日)","8/5(月)"],reservations:[],selectedDate:"8/1(木)",searchFurigana:"",searchName:"",searchTel:"",searchStatus:"",searchTime:"",isLoading:!1}},computed:{filteredReservations(){return this.reservations.filter((e=>e.date===this.selectedDate)).filter((e=>e.furigana.includes(this.searchFurigana))).filter((e=>e.name.includes(this.searchName))).filter((e=>e.tel.includes(this.searchTel))).filter((e=>e.checkIn.includes(this.searchStatus))).filter((e=>e.time.includes(this.searchTime)))}},async created(){this.update()},methods:{exportToCSV(){let e="\ufeff";e+="Date,Time,Name,Furigana,Tel,Email,HomeTown,Id,ReserveTime,Children,Fee\n";for(const i of this.reservations)e+=`${i.date},${i.time},${i.name},${i.furigana},${i.tel},${i.email},${i.hometown},${i.id},${i.time_stamp},${i.customer_num},${i.fee}\n`;const t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),a=URL.createObjectURL(t);s.setAttribute("href",a),s.setAttribute("download","reservations.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},goToCheckInOutPage(e){this.$router.push({name:"checkInOutPage",params:{reserveId:e}})},async update(){try{this.reservations=[],this.isLoading=!0;const e=await fetch("https://sunapp.jp/sunappForReserve/api/getReservations.php",{method:"POST",headers:{"Content-Type":"application/json",Pragma:"no-cache"}}),t=await e.json();"success"===t.status?(this.reservations=t.reservations,this.reservations=this.reservations.filter((e=>""!==e.name)),this.dates.length>0&&(this.selectedDate=this.dates[0])):console.error("エラーが発生しました: ",t.message)}catch(e){console.error("エラーが発生しました: ",e)}this.isLoading=!1},goToHomePage(){this.$router.push({name:"Home"})},reservationStatus(e){switch(e){case"0":return"未チェックイン";case"1":return"チェックイン済";case"2":return"チェックアウト済";default:return""}},reservationStatusClass(e){switch(e){case"0":return"status-not-checked-in";case"1":return"status-checked-in";case"2":return"status-checked-out";default:return""}}}};const vt=(0,o.A)(ht,[["render",ut],["__scopeId","data-v-2b942739"]]);var pt=vt;const mt=e=>((0,i.Qi)("data-v-39a68315"),e=e(),(0,i.jt)(),e),kt=mt((()=>(0,i.Lk)("header",null,[(0,i.Lk)("div",{class:"title"},"ログイン ")],-1))),gt={class:"container"},Lt=mt((()=>(0,i.Lk)("p",null,"ID(メールアドレス)",-1))),ft=mt((()=>(0,i.Lk)("p",null,null,-1))),bt={class:"container"},Ct=mt((()=>(0,i.Lk)("p",null,"パスワード",-1))),yt=mt((()=>(0,i.Lk)("p",null,null,-1))),It={class:"message"},wt={class:"red"},Tt=mt((()=>(0,i.Lk)("br",null,null,-1)));function jt(e,t,s,n,r,o){return(0,i.uX)(),(0,i.CE)("body",null,[kt,(0,i.Lk)("main",null,[(0,i.Lk)("div",gt,[Lt,(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>r.inputValueId=e)},null,512),[[a.Jo,r.inputValueId]]),ft]),(0,i.Lk)("div",bt,[Ct,(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.inputValuePassword=e)},null,512),[[a.Jo,r.inputValuePassword]]),yt]),(0,i.Lk)("div",It,[(0,i.Lk)("p",wt,(0,h.v_)(r.errorMessage)+" ",1)]),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn_standard",type:"submit",onClick:t[2]||(t[2]=(...e)=>o.logIn&&o.logIn(...e))},"ログインする")]),Tt])])}var _t=s(6400),Ot=s(5942),Pt=s(7617);const Rt={apiKey:"AIzaSyC8lW6148uBSbC5_U7UZTk_KVt0E4akYM0",authDomain:"karatsu-waterpark.firebaseapp.com",projectId:"karatsu-waterpark",storageBucket:"karatsu-waterpark.appspot.com",messagingSenderId:"109223703797",appId:"1:109223703797:web:778d33f7c105ad987681bc",measurementId:"G-8MQSQKR3YG"},St=(0,_t.Wp)(Rt),Et=(0,Ot.P5)(St),Ft=(0,Pt.aU)(St),$t=(0,u.xI)(St);var Dt={analytics:Et,db:Ft,auth:$t};const Wt=Dt.auth;var Qt={methods:{goToHome(){this.$router.push("/")},logIn(){if(void 0===this.inputValueId||""===this.inputValueId||void 0===this.inputValuePassword||""===this.inputValuePassword)return void(this.errorMessage="IDまたはパスワードが未入力です");this.errorMessage="",this.isLoading=!0;const e=this.inputValueId,t=this.inputValuePassword;this.inputValuePassword="",(0,u.x9)(Wt,e,t).then((e=>{const t=e.user;console.log("ログイン成功 "+t.email),this.goToHome()})).catch((e=>{const t=e.code,s=e.message;console.log("ログインエラー: errorCode -> "+t+", errorMessage -> "+s),this.JudgeErrorCode(t),this.isLoading=!1}))},register(){this.$router.push("/register")},JudgeErrorCode(e){const t=String(e);this.errorMessage="auth/wrong-password"===t||"auth/invalid-email"===t||"auth/user-not-found"===t?"ログインに失敗しました。IDまたはパスワードが間違っています":"ログインに失敗しました。予期せぬエラーが発生しました。"}},data(){return{isLoading:!1,errorMessage:"",inputValueId:"",inputValuePassword:""}},computed:{}};const Vt=(0,o.A)(Qt,[["render",jt],["__scopeId","data-v-39a68315"]]);var Mt=Vt;const xt=[{path:"/",name:"Home",component:I,meta:{title:"Home",requiresAuth:!0}},{path:"/qrcode",name:"qrcodeReader",component:oe,meta:{title:"QRCodeReader",requiresAuth:!0}},{path:"/deletePage/:reserveId",name:"deletePage",component:H,props:!0,meta:{title:"予約削除",requiresAuth:!0}},{path:"/checkInOutPage/:reserveId",name:"checkInOutPage",component:Xe,props:!0,meta:{title:"チェックイン/アウト",requiresAuth:!0}},{path:"/list",name:"list",component:pt,meta:{title:"予約者リスト",requiresAuth:!0}},{path:"/login",name:"login",component:Mt,meta:{title:"Login",requiresAuth:!1}}],Xt=(0,d.aE)({history:(0,d.Bt)(),routes:xt,scrollBehavior(){return{top:0}}});let At;Xt.afterEach((e=>{document.title=e.meta.title+" | reserve"})),Xt.beforeEach(((e,t,s)=>{const a=(0,u.xI)();if(e.matched.some((e=>e.meta.requiresAuth))){if(a.currentUser)return void s();"function"===typeof At&&At(),(0,u.hg)(a,(e=>{e?s():s({name:"login"})}))}else s()}));var qt=Xt;(0,a.Ef)(c).use(qt).mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,n){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],n=e[d][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,n,r=a[0],o=a[1],l=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var d=l(s)}for(t&&t(a);c<r.length;c++)n=r[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self["webpackChunkreserve"]=self["webpackChunkreserve"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(9075)}));a=s.O(a)})();
//# sourceMappingURL=app.70a17397.js.map