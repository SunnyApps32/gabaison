{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nexport default {\n  data() {\n    return {\n      dates: ['8/1(木)', '8/2(金)', '8/3(土)', '8/4(日)', '8/5(月)'],\n      reservations: [],\n      selectedDate: '8/1(木)',\n      searchFurigana: '',\n      searchName: '',\n      searchTel: '',\n      searchStatus: '',\n      searchTime: '',\n      isLoading: false\n    };\n  },\n  computed: {\n    filteredReservations() {\n      return this.reservations.filter(reservation => reservation.date === this.selectedDate).filter(reservation => reservation.furigana.includes(this.searchFurigana)).filter(reservation => reservation.name.includes(this.searchName)).filter(reservation => reservation.tel.includes(this.searchTel)).filter(reservation => reservation.checkIn.includes(this.searchStatus)).filter(reservation => reservation.time.includes(this.searchTime));\n    }\n  },\n  async created() {\n    this.update();\n  },\n  methods: {\n    exportToCSV() {\n      let csvContent = \"\\uFEFF\"; // Add BOM\n      csvContent += \"Date,Time,Name,Furigana,Tel,Email,HomeTown,Id,ReserveTime,Children,Fee\\n\";\n      for (const reservation of this.reservations) {\n        csvContent += `${reservation.date},${reservation.time},${reservation.name},${reservation.furigana},${reservation.tel},${reservation.email},${reservation.hometown},${reservation.id},${reservation.time_stamp},${reservation.customer_num},${reservation.fee}\\n`;\n      }\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const link = document.createElement(\"a\");\n      const url = URL.createObjectURL(blob);\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"reservations.csv\");\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    },\n    goToCheckInOutPage(reservationId) {\n      this.$router.push({\n        name: 'checkInOutPage',\n        params: {\n          reserveId: reservationId\n        }\n      });\n    },\n    async update() {\n      try {\n        this.reservations = [];\n        this.isLoading = true;\n        const response = await fetch('', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Pragma': 'no-cache'\n          }\n        });\n        const data = await response.json();\n        if (data.status === 'success') {\n          this.reservations = data.reservations;\n          this.reservations = this.reservations.filter(reservation => reservation.name !== '');\n          if (this.dates.length > 0) {\n            this.selectedDate = this.dates[0];\n          }\n        } else {\n          console.error('エラーが発生しました: ', data.message);\n        }\n      } catch (error) {\n        console.error('エラーが発生しました: ', error);\n      }\n      this.isLoading = false;\n    },\n    goToHomePage() {\n      this.$router.push({\n        name: \"Home\"\n      });\n    },\n    reservationStatus(status) {\n      switch (status) {\n        case '0':\n          return '未チェックイン';\n        case '1':\n          return 'チェックイン済';\n        case '2':\n          return 'チェックアウト済';\n        default:\n          return '';\n      }\n    },\n    reservationStatusClass(status) {\n      switch (status) {\n        case '0':\n          return 'status-not-checked-in';\n        case '1':\n          return 'status-checked-in';\n        case '2':\n          return 'status-checked-out';\n        default:\n          return '';\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","dates","reservations","selectedDate","searchFurigana","searchName","searchTel","searchStatus","searchTime","isLoading","computed","filteredReservations","filter","reservation","date","furigana","includes","name","tel","checkIn","time","created","update","methods","exportToCSV","csvContent","email","hometown","id","time_stamp","customer_num","fee","blob","Blob","type","link","document","createElement","url","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","goToCheckInOutPage","reservationId","$router","push","params","reserveId","response","fetch","method","headers","json","status","length","console","error","message","goToHomePage","reservationStatus","reservationStatusClass"],"sources":["/app/reserve/src/views/listPage.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"div-2\">\n      <img loading=\"lazy\"\n        src=\"https://cdn.builder.io/api/v1/image/assets/TEMP/93df00fc34138266fdb4a1b858262d23dc5dc1d3f04b1fffdd1ac7810d8282ec?\"\n        class=\"img\" @click=\"goToHomePage\" />\n      <div class=\"div-3\">予約一覧\n      </div>\n      <button class=\"button-2\" @click=\"update\">更新</button>\n      <button class=\"button-2\"  @click=\"exportToCSV\">出力</button>\n    </div>\n\n    <main class=\"main\">\n      <div class=\"tabs\">\n        <button v-for=\"date in dates\" :key=\"date\" @click=\"selectedDate = date\" :class=\"{ active: selectedDate === date }\">\n          {{ date }}\n        </button>\n      </div>\n      <div class=\"filters\">\n        <input v-model=\"searchName\" placeholder=\"名前で検索\" />\n        <input v-model=\"searchFurigana\" placeholder=\"フリガナで検索\" />\n        <input v-model=\"searchTel\" placeholder=\"電話番号で検索\" />\n        <select v-model=\"searchStatus\">\n          <option value=\"\">ステータスで検索</option>\n          <option value=\"0\">未チェックイン</option>\n          <option value=\"1\">チェックイン中</option>\n          <option value=\"2\">チェックアウト済</option>\n        </select>\n        <select v-model=\"searchTime\">\n          <option value=\"\">時間で検索</option>\n          <option value=\"9:30~11:20\">9:30~11:20</option>\n          <option value=\"12:00~13:50\">12:00~13:50</option>\n          <option value=\"15:00~16:50\">15:00~16:50</option>\n        </select>\n      </div>\n      <table>\n        <thead>\n          <tr>\n            <th>名前</th>\n            <th>フリガナ</th>\n            <th>電話番号</th>\n            <th>人数</th>\n            <th>ステータス</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"reservation in filteredReservations\" :key=\"reservation.id\"\n            @click=\"goToCheckInOutPage(reservation.id)\" class=\"clickable-row\">\n            <td>{{ reservation.name }}</td>\n            <td>{{ reservation.furigana }}</td>\n            <td>{{ reservation.tel }}</td>\n            <td>{{ reservation.customer_num }}</td>\n            <td :class=\"reservationStatusClass(reservation.checkIn)\">\n              {{ reservationStatus(reservation.checkIn) }}\n            </td>\n\n          </tr>\n        </tbody>\n      </table>\n    </main>\n  </div>\n  <transition-group name=\"fade\" mode=\"out-in\">\n    <div v-show=\"isLoading\" class=\"loader\" key=\"loader\">\n      <div id=\"loading\">\n        <div class=\"loading\">\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n          <div class=\"obj\"></div>\n        </div>\n      </div>\n    </div>\n\n  </transition-group>\n</template>\n  \n<script>\nexport default {\n  data() {\n    return {\n      dates: ['8/1(木)', '8/2(金)', '8/3(土)', '8/4(日)', '8/5(月)'],\n      reservations: [],\n      selectedDate: '8/1(木)',\n      searchFurigana: '',\n      searchName: '',\n      searchTel: '',\n      searchStatus: '',\n      searchTime: '',\n      isLoading: false,\n    };\n  },\n  computed: {\n\n    filteredReservations() {\n      return this.reservations\n        .filter(reservation => reservation.date === this.selectedDate)\n        .filter(reservation => reservation.furigana.includes(this.searchFurigana))\n        .filter(reservation => reservation.name.includes(this.searchName))\n        .filter(reservation => reservation.tel.includes(this.searchTel))\n        .filter(reservation => reservation.checkIn.includes(this.searchStatus))\n        .filter(reservation => reservation.time.includes(this.searchTime))\n    }\n  },\n  async created() {\n\n    this.update();\n  },\n  methods: {\n    exportToCSV() {\n  let csvContent = \"\\uFEFF\"; // Add BOM\n  csvContent += \"Date,Time,Name,Furigana,Tel,Email,HomeTown,Id,ReserveTime,Children,Fee\\n\";\n\n  for (const reservation of this.reservations) {\n    csvContent += `${reservation.date},${reservation.time},${reservation.name},${reservation.furigana},${reservation.tel},${reservation.email},${reservation.hometown},${reservation.id},${reservation.time_stamp},${reservation.customer_num},${reservation.fee}\\n`;\n  }\n\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const link = document.createElement(\"a\");\n  const url = URL.createObjectURL(blob);\n  link.setAttribute(\"href\", url);\n  link.setAttribute(\"download\", \"reservations.csv\");\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n},\n    goToCheckInOutPage(reservationId) {\n      this.$router.push({ name: 'checkInOutPage', params: { reserveId: reservationId } });\n    },\n    async update() {\n      try {\n\n        this.reservations = []\n        this.isLoading = true;\n        const response = await fetch('', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Pragma': 'no-cache'\n          },\n        });\n\n\n        const data = await response.json();\n\n\n        if (data.status === 'success') {\n          this.reservations = data.reservations;\n          this.reservations = this.reservations.filter(reservation => reservation.name !== '')\n\n          if (this.dates.length > 0) {\n            this.selectedDate = this.dates[0];\n          }\n        } else {\n          console.error('エラーが発生しました: ', data.message);\n        }\n      } catch (error) {\n        console.error('エラーが発生しました: ', error);\n      }\n      this.isLoading = false\n    },\n    goToHomePage() {\n      this.$router.push({ name: \"Home\" });\n    },\n    reservationStatus(status) {\n      switch (status) {\n        case '0':\n          return '未チェックイン';\n        case '1':\n          return 'チェックイン済';\n        case '2':\n          return 'チェックアウト済';\n        default:\n          return '';\n      }\n    },\n    reservationStatusClass(status) {\n      switch (status) {\n        case '0':\n          return 'status-not-checked-in';\n        case '1':\n          return 'status-checked-in';\n        case '2':\n          return 'status-checked-out';\n        default:\n          return '';\n      }\n    }\n  },\n\n};\n</script>\n  \n<style scoped>\n.container {\n  background-color: #ebfffe;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  color: #000;\n  font-weight: 700;\n  margin: 0 auto;\n}\n\n.header {\n  background-color: #2c4e61;\n  width: 100%;\n  text-align: center;\n  padding: 20px 0;\n  font-weight: bold;\n  font-size: 20px;\n  color: #fff;\n}\n\n.main {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 30px;\n  width: 100%;\n}\n\n.div-2 {\n  background-color: #2c4e61;\n  display: flex;\n  width: 100%;\n  align-items: start;\n  gap: 20px;\n\n  color: #ebfffe;\n  white-space: nowrap;\n  text-align: center;\n  letter-spacing: -0.38px;\n  display: flex;\n  justify-content: center;\n  /* 子要素を中央揃え */\n  position: relative;\n  padding: 30px 0 10px;\n  font-weight: bold;\n  font-size: 20px;\n\n}\n\n.img {\n  aspect-ratio: 1;\n  object-fit: auto;\n  object-position: center;\n  width: 54px;\n  position: absolute;\n  left: 0;\n}\n\n.div-3 {\n  font-family: M PLUS Code Latin, sans-serif;\n  margin: 18px;\n  flex-grow: 1;\n  flex-basis: auto;\n  margin-left: 80px;\n}\n\n\n.button-1 {\n  object-fit: auto;\n  object-position: center;\n  width: 100px;\n  align-self: end;\n  height: 50px;\n  margin-left: 20px;\n  aspect-ratio: 1;\n  object-fit: auto;\n  object-position: center;\n  width: 54px;\n  position: absolute;\n  right: 0;\n}\n\n.button-2{\n  background-color: #43b1f1;\n  color: #ebfffe;\n  padding: 10px 20px;\n  border-radius: 5px;\n  cursor: pointer;\n  \n}\n\n.tabs {\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n}\n\n.tabs button {\n  padding: 10px 20px;\n  border: none;\n  background-color: #ccc;\n  cursor: pointer;\n}\n\n.tabs button.active {\n  background-color: #2c4e61;\n  color: #fff;\n}\n\n.filters {\n  margin-bottom: 20px;\n}\n\n.filters input {\n  margin-right: 10px;\n  padding: 10px;\n  border-radius: 5px;\n  border: 1px solid #ccc;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n\nthead {\n  background-color: #2c4e61;\n  color: #fff;\n}\n\nth,\ntd {\n  padding: 10px;\n  text-align: left;\n  border: 1px solid #ddd;\n}\n\n.status-not-checked-in {\n  color: red;\n}\n\n.status-checked-in {\n  color: green;\n}\n\n.status-checked-out {\n  color: blue;\n}\n\n\n/* ローディング画面 */\n.loader {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1080;\n}\n\n#loading {\n  width: 100vw;\n  height: 100vh;\n  transition: all 1s;\n  background: rgba(0, 0, 0, 1.0);\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.loading {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  height: 40px;\n  display: flex;\n  align-items: center;\n}\n\n.obj {\n  width: 5px;\n  height: 40px;\n  background: white;\n  margin: 0 3px;\n  border-radius: 10px;\n  animation: loading 0.8s infinite;\n}\n\n.obj:nth-child(2) {\n  animation-delay: 0.1s;\n}\n\n.obj:nth-child(3) {\n  animation-delay: 0.2s;\n}\n\n.obj:nth-child(4) {\n  animation-delay: 0.3s;\n}\n\n.obj:nth-child(5) {\n  animation-delay: 0.4s;\n}\n\n.obj:nth-child(6) {\n  animation-delay: 0.5s;\n}\n\n.obj:nth-child(7) {\n  animation-delay: 0.6s;\n}\n\n.obj:nth-child(8) {\n  animation-delay: 0.7s;\n}\n\n@keyframes loading {\n  0% {\n    height: 0;\n  }\n\n  50% {\n    height: 40px;\n  }\n\n  100% {\n    height: 0;\n  }\n}</style>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}